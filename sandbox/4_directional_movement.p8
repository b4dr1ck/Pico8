pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
    x=32
    y=32
    xspeed=0
    yspeed=0
    sprite=1
    game_counter=1
    score=0
    debug=""
    debug2=""
    
    gold={}
    gold.sprite=4
    coins={
            {10*8,4*8},
            {11*8,4*8},
            {10*8,5*8},
            {11*8,5*8},
            {10*8,6*8},
            {11*8,6*8}
            }
end

function animate()
    if game_counter % 5 == 0 then
        sprite+=1
        if sprite > 3 then sprite=1 end
    end
end

function _update()
    
    game_counter+=1
    if game_counter > 100 then game_counter = 1 end

    -- move left and right
    if(btn(0)) then
        if (collision(x-1,y) or collision(x-1,y+7)) then
            xspeed = 0
        else
            xspeed = -1
        end
        animate()
        lor=true
    elseif (btn(1)) then
        if (collision(x+8,y) or collision(x+8,y+7)) then
            xspeed = 0
        else
            xspeed = 1
        end
        animate()
        lor=false
    else
        xspeed = 0
    end
    
    x += xspeed
    
    -- move up and down
    if(btn(2)) then
        if (collision(x,y-1) or collision(x+7,y-1)) then
            yspeed = 0
        else
            yspeed = -1
        end
        animate()
    elseif (btn(3)) then
        if (collision(x,y+8) or collision(x+7,y+8)) then
            yspeed = 0
        else
            yspeed = 1
        end
        animate()
    else
        yspeed = 0
    end
    
    y += yspeed
    
    if xspeed == 0 and yspeed == 0 then sprite = 1 end
        
    if game_counter % 5 == 0 then
        gold.sprite+=1
        if gold.sprite > 5 then gold.sprite=4 end
    end    
end

function _draw()
    cls()
    map(0,0,0,0)
    
    for x=1,#coins do
        spr(gold.sprite,coins[x][1],coins[x][2])
    end
    spr(sprite,x,y,1,1,lor)
    
    for i=1,#coins do
        if (coins[i][1]/8 == flr((x+4)/8)) and (coins[i][2]/8 == flr((y+4)/8)) then
            coins[i][1] = -8
            coins[i][2] = -8
            score+=1
        end
    end
    
    rectfill(0,0,32,8,0)
    print("coins: "..score,0,0,8)
    
end

function collision(x,y)
    if (fget(mget(x/8,y/8)) == 1) then
        return true
    else
        return false
    end
end





__gfx__
00000000012222100122221001222210000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000012e2222112e2222112e2222100899800000a800000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007002222a2292222a2292222a229009779000007900000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000122212e1122212e1122212e1009779000007900000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000222222222222222222222222009aa9000007900000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700122226711222267112222671009aa9000007900000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001222881012228810122288100899800000a800000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000002202200000022000220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd1111111133b3b343333b33c3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd555515553b33333bb3333cac000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd111111113333bb33337333c3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd15555551334b343337a73b33000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd111111113b33333333733333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd5555155533333b3b333333e3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd111111113b3b343b3b3b3e9e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd3bb3333b43333333333333e3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
55551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555
55551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555
55551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
15555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555
15555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555
15555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
11111111000000000000000000000000000000000000000000000000000000000000000001222e10000000000000000000000000000000000000000011111111
5555155500000000000000000000000000000000000000000000000000000000000000001222e7e1000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000000000000092292e22000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000000000000012212222000000000000000000000000000000000000000055551555
11111111000000000000000000000000000000000000000000000000000000000000000022222222000000000000000000000000000000000000000011111111
15555555000000000000000000000000000000000000000000000000000000000000000027622222000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000000000000012222222000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000000000000011222221000000000000000000000000000000000000000015555555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
55551555000000000000000000000000000000000000000000000000000000005555155500000000000000000000000000000000000000000000000055551555
11111111000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000011111111
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
15555555000000000000000000000000000000000000000000000000000000001555555500000000000000000000000000000000000000000000000015555555
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
55551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555
55551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555
55551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
15555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555
15555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555
15555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555155555551555555515555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__gff__
0000000002020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
4040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4041414141414140404141414141414000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242424240414242424242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242424241424242424242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424342424242424242434242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242424242424242424242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242424242404242424342424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242424240404242424242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4040404242404040404040424240404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4041414242414141414141424241414000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4043424242424242424242424242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242424242424242424242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242434242424242424342424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242424242424242424242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4042424242424242424242424242424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
