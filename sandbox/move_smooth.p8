pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

function _init()
 x=64
 y=64
 w=7
 h=7
 x_speed=0
 y_speed=0
 max_speed=2
 direction=1
end

function _update60()
 -- movement
 -- 	left
 if btn(0) then
  if (x_speed > -max_speed) then
   x_speed -= 0.125
  end
  direction=4
 end
 --  right
 if btn(1) then
  if (x_speed < max_speed) then
   x_speed += 0.125
  end
  direction=3
 end
 --  up
 if btn(2) then
  if (y_speed > -max_speed) then
   y_speed -= 0.125
  end
  direction=2
 end
 --  down
 if btn(3) then
  if (y_speed < max_speed) then
   y_speed += 0.125
  end
  direction=1
 end
 
 -- friction
 --  left
 if not btn(1) then
  if x_speed > 0 then
   x_speed -= 0.125
   end
 end
 --  right
 if  not btn(0) then
  if x_speed < 0 then
   x_speed += 0.125
   end
 end
 --  up
 if not btn(3) then
  if y_speed > 0 then
   y_speed -= 0.125
   end
 end
 --  down
 if  not btn(2) then
  if y_speed < 0 then
   y_speed += 0.125
   end
 end
 
 -- add speed to x and y
 x+=x_speed
 y+=y_speed
 

 -- collision 
 --  left
 if x < 0 then
--   while x <0  do
--   	x+=1 
--   end
--			x_speed=0
   x_speed = max_speed
 end
 --  right
 if x >127 - w then
--   while x > 120 do
--   	x-=1
--   end
--   x_speed = 0
		x_speed = -max_speed
 end
 --  up
 if y < 0 then
--   while y <0  do
--   	y+=1 
--   end
--   y_speed = 0
		y_speed = max_speed
 end
 --  down
 if y >127 - h then
--   while y > 120 do
--   	y-=1
--   end
--   y_speed = 0
		y_speed = -max_speed
 end
end

function _draw()
	cls()
	map(0,0,0,0)
-- rectfill(x,y,x+w,y+h,8)
-- fillp(0b0011001111001100.1)
-- circfill(x+3,y+5,5,0)
--	fillp()
-- circfill(x+3,y+3,6,0)
 spr(direction,x,y,1,1)
	color(7)
	print("x_speed: "..x_speed)
	print("y_speed: "..y_speed)
	print("x: " .. x)
	print("y: " .. y)
	print(fget(mget(flr(x+w+x_speed)/8,flr(y+h+y_speed)/8)))
end
__gfx__
00000000026766200267662002676660066766200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000061c116006666660066661c00c1666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700061111600666666006666110011666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000061111600666666006666110011666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000026666200266662002666660066666200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000022d200002d220000222d0000d222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000622d260062d226000222600006222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006006000060060000026000000620000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
24444442000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
24444442000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
