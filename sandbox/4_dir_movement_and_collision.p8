pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
	p = {}
	p.x = 64
	p.y = 32
	p.xspeed = 0
	p.maxspeed = 2
	p.yspeed = 0
	p.friction = 0.25	
	p.direction = false
end

function _update()
 -- add speed to players x
	p.x += p.xspeed
	
	-- collision detection
 -- 	left
	if fget(mget(flr((p.x)/8),flr(p.y/8))) == 1 or
				fget(mget(flr((p.x)/8),flr((p.y+7)/8))) == 1
	then
			p.xspeed = 0
			p.x = ceil(p.x/8)*8
 -- 	right			
	elseif fget(mget(flr((p.x+8)/8),flr(p.y/8))) == 1 or
								fget(mget(flr((p.x+8)/8),flr((p.y+7)/8))) == 1
	then
			p.xspeed = 0
			p.x = flr(p.x/8)*8
	end

 -- add speed to players y
	p.y += p.yspeed	

	-- collision detection
	-- 	up
	if fget(mget(flr((p.x)/8),flr(p.y/8))) == 1 or
								fget(mget(flr((p.x+7)/8),flr((p.y)/8))) == 1
	then
			p.yspeed = 0
			p.y = ceil(p.y/8)*8
	-- 	down
	elseif fget(mget(flr((p.x)/8),flr((p.y+8)/8))) == 1 or
								fget(mget(flr((p.x+7)/8),flr((p.y+8)/8))) == 1
	then
			p.yspeed = 0
			p.y = flr(p.y/8)*8
	end

 -- movement
	-- 	go left
	if btn(0) then
		p.xspeed -= 0.25
		p.xspeed = max(p.xspeed,-p.maxspeed)
		p.direction = true
	end
	-- 	go right
	if btn(1) then
		p.xspeed += 0.25
		p.xspeed = min(p.xspeed,p.maxspeed)
		p.direction = false
	end
	
	-- go up
	if btn(2) then
		p.yspeed -= 0.25
		p.yspeed = max(p.yspeed,-p.maxspeed)
	end
	
	-- go down
	if btn(3) then
		p.yspeed += 0.25
		p.yspeed = min(p.yspeed,p.maxspeed)
	end
	
	-- friction when no button is pressed
	if not btn(0) and not btn(1) then
		if p.xspeed < 0 then p.xspeed += p.friction end
		if p.xspeed > 0 then p.xspeed -= p.friction end
	end
	
	if not btn(2) and not btn(3) then
		if p.yspeed < 0 then p.yspeed += p.friction end
		if p.yspeed > 0 then p.yspeed -= p.friction end
	end
end



function _draw()
	cls()
	map(0,0,0,0)
	spr(2,p.x,p.y,1,1,p.direction)
end




__gfx__
0000000066665666028e882010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555552888888201010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700566666668888a88910101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000555555558e88288201010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700066665666e7e8788210101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700555555558e88276501010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000566666662888888210101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555552222222201010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101030303030301010303030303010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0103030303030303030303030303030100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0103030303030303030303030303030100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101030303030303030303030303010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0103030303030303030303030303030100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0103030303030303030303030303030100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101030303030301010303030303010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
